<%= render "ajax", post: @post %>
<script type="text/javascript">
  const text_box = document.getElementById("text_box");
  const image = document.getElementById("image");
  const use_day = document.getElementById("use_day");
  const memo = document.getElementById("memo");
  const price = document.getElementById("price");
  


   //a要素を取得する
    let link = document.getElementById("link");
    link.addEventListener('click', makeParams);
    
    function makeParams() {
      let memoParams = memo.value
      let priceParams = price.value
      let category_nameParams = text_box.value

      let memoResult = "post[memo]=" + memoParams
      let priceResult = "post[price]=" + priceParams
      let category_nameResult = "category[name]=" + category_nameParams

      let result = "<%= posts_new_category_path %>" + "?" + memoResult +"&"+ priceResult +"&"+ category_nameResult

      link.setAttribute('href',  encodeURI(result))
    }

  // //a要素を取得する
  // let link = document.getElementById("link");


  // //この記述でhrefのurl生成
  // let url = "<%= posts_new_category_path %>?category[name]=category_name&post[memo]=test"


  // // addEventListenerで#text_boxにイベントを付与, inputのイベントが発生したら動かしたい関数handleInputが動く
  // text_box.addEventListener('input', handleInput);


  // //handleInput(event)引数に値が取得できるようになっている これはjsの仕様
  // //targetはhtmlのイベントが発生した時に値を取得
  // function handleInput(event) {
  //   //link.setAttributeでセーブしていて, 今回pathを保存したいけど消されてしまうため変数で作ってあげて+で結合
  //   link.setAttribute('href',  encodeURI(url) + event.target.value);
  //   console.log(encodeURI(url))
  // }
</script>
